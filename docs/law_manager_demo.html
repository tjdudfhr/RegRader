<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì ìš©ë²•ê·œ ìë™ ë§¤í•‘ ì‹œìŠ¤í…œ ë°ëª¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --success: #48bb78;
            --warning: #f093fb;
            --danger: #fc466b;
            --bg: #f7fafc;
            --card-bg: #ffffff;
            --text: #2d3748;
            --text-muted: #718096;
            --border: #e2e8f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            background: linear-gradient(135deg, var(--primary) 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .add-law-section {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .matching-results {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .match-item {
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--border);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .match-score {
            background: var(--success);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .flow-diagram {
            background: linear-gradient(135deg, #667eea10 0%, #764ba210 100%);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: white;
            border-radius: 8px;
            margin: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .arrow {
            display: inline-block;
            margin: 0 1rem;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .success-message {
            background: rgba(72, 187, 120, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ ì ìš©ë²•ê·œ ìë™ ë§¤í•‘ ì‹œìŠ¤í…œ</h1>

        <!-- í†µê³„ í˜„í™© -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="total-base">207</div>
                <div class="stat-label">ê¸°ë³¸ ì ìš©ë²•ê·œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-2025">2,971</div>
                <div class="stat-label">2025ë…„ ì „ì²´ ë²•ê·œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-matched">276</div>
                <div class="stat-label">ë§¤ì¹­ëœ ë²•ê·œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="match-rate">133%</div>
                <div class="stat-label">ë§¤ì¹­ë¥ </div>
            </div>
        </div>

        <!-- í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° -->
        <div class="flow-diagram">
            <div class="flow-step">â• ë²•ê·œ ì¶”ê°€</div>
            <span class="arrow">â†’</span>
            <div class="flow-step">ğŸ” ìë™ ë§¤ì¹­</div>
            <span class="arrow">â†’</span>
            <div class="flow-step">âœ… ê²€ì¦</div>
            <span class="arrow">â†’</span>
            <div class="flow-step">ğŸ“Š í†µê³„ ì—…ë°ì´íŠ¸</div>
        </div>

        <!-- ë²•ê·œ ì¶”ê°€ í¼ -->
        <div class="add-law-section">
            <h2>ìƒˆ ì ìš©ë²•ê·œ ì¶”ê°€</h2>
            <div class="form-group">
                <label for="law-title">ë²•ë ¹ëª… *</label>
                <input type="text" id="law-title" placeholder="ì˜ˆ: ê°œì¸ì •ë³´ ë³´í˜¸ë²• ì‹œí–‰ë ¹">
            </div>
            <div class="form-group">
                <label for="law-category">ì¹´í…Œê³ ë¦¬</label>
                <select id="law-category">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="í™˜ê²½">í™˜ê²½</option>
                    <option value="ì•ˆì „">ì•ˆì „</option>
                    <option value="ì¸ì‚¬ë…¸ë¬´">ì¸ì‚¬ë…¸ë¬´</option>
                    <option value="ì¬ë¬´íšŒê³„">ì¬ë¬´íšŒê³„</option>
                    <option value="ì •ë³´ë³´í˜¸">ì •ë³´ë³´í˜¸</option>
                    <option value="ê³µì •ê±°ë˜">ê³µì •ê±°ë˜</option>
                    <option value="ì§€ë°°êµ¬ì¡°">ì§€ë°°êµ¬ì¡°</option>
                    <option value="ì§€ì‹ì¬ì‚°ê¶Œ">ì§€ì‹ì¬ì‚°ê¶Œ</option>
                </select>
            </div>
            <div class="form-group">
                <label for="law-ministry">ì£¼ë¬´ë¶€ì²˜</label>
                <input type="text" id="law-ministry" placeholder="ì˜ˆ: ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ">
            </div>
            <button onclick="addAndMatchLaw()">ğŸš€ ë²•ê·œ ì¶”ê°€ ë° ìë™ ë§¤ì¹­</button>
            <div class="success-message" id="success-msg"></div>
        </div>

        <!-- ë§¤ì¹­ ê²°ê³¼ -->
        <div class="matching-results" id="matching-results" style="display: none;">
            <h2>ğŸ¯ ìë™ ë§¤ì¹­ ê²°ê³¼</h2>
            <div id="match-list"></div>
        </div>
    </div>

    <script>
        // ë”ë¯¸ 2025ë…„ ë²•ê·œ ë°ì´í„°
        const laws2025 = [
            { title: "ê°œì¸ì •ë³´ ë³´í˜¸ë²•", effectiveDate: "2025-03-15", category: "ì •ë³´ë³´í˜¸" },
            { title: "ê°œì¸ì •ë³´ ë³´í˜¸ë²• ì‹œí–‰ë ¹", effectiveDate: "2025-03-15", category: "ì •ë³´ë³´í˜¸" },
            { title: "ê°œì¸ì •ë³´ ë³´í˜¸ë²• ì‹œí–‰ê·œì¹™", effectiveDate: "2025-03-15", category: "ì •ë³´ë³´í˜¸" },
            { title: "ê·¼ë¡œê¸°ì¤€ë²•", effectiveDate: "2025-01-01", category: "ì¸ì‚¬ë…¸ë¬´" },
            { title: "ê·¼ë¡œê¸°ì¤€ë²• ì‹œí–‰ë ¹", effectiveDate: "2025-01-01", category: "ì¸ì‚¬ë…¸ë¬´" },
            { title: "í™˜ê²½ì •ì±…ê¸°ë³¸ë²•", effectiveDate: "2025-07-01", category: "í™˜ê²½" },
            { title: "ëŒ€ê¸°í™˜ê²½ë³´ì „ë²•", effectiveDate: "2025-07-01", category: "í™˜ê²½" },
            { title: "ì‚°ì—…ì•ˆì „ë³´ê±´ë²•", effectiveDate: "2025-01-01", category: "ì•ˆì „" },
            { title: "ì¤‘ëŒ€ì¬í•´ì²˜ë²Œë²•", effectiveDate: "2025-01-01", category: "ì•ˆì „" }
        ];

        let baseLaws = 207;
        let matchedLaws = 276;

        function addAndMatchLaw() {
            const title = document.getElementById('law-title').value;
            const category = document.getElementById('law-category').value;
            const ministry = document.getElementById('law-ministry').value;

            if (!title) {
                alert('ë²•ë ¹ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            // ìë™ ë§¤ì¹­ ìˆ˜í–‰
            const matches = findMatches(title, category);

            // í†µê³„ ì—…ë°ì´íŠ¸
            baseLaws++;
            if (matches.length > 0) {
                matchedLaws++;
            }
            updateStatistics();

            // ê²°ê³¼ í‘œì‹œ
            showMatchingResults(title, matches);

            // ì„±ê³µ ë©”ì‹œì§€
            showSuccess(title, matches.length);

            // í¼ ì´ˆê¸°í™”
            document.getElementById('law-title').value = '';
            document.getElementById('law-category').value = '';
            document.getElementById('law-ministry').value = '';
        }

        function findMatches(title, category) {
            const matches = [];
            const normalizedTitle = title.toLowerCase().replace(/\s/g, '');

            for (const law of laws2025) {
                const normalizedLaw = law.title.toLowerCase().replace(/\s/g, '');
                let score = 0;

                // ì œëª© ìœ ì‚¬ë„
                if (normalizedLaw === normalizedTitle) {
                    score = 100;
                } else if (normalizedLaw.includes(normalizedTitle) || normalizedTitle.includes(normalizedLaw)) {
                    score = 70;
                } else {
                    // í‚¤ì›Œë“œ ë§¤ì¹­
                    const keywords = title.split(' ').filter(word => word.length > 1);
                    let matchCount = 0;
                    for (const keyword of keywords) {
                        if (law.title.includes(keyword)) {
                            matchCount++;
                        }
                    }
                    score = (matchCount / keywords.length) * 50;
                }

                // ì¹´í…Œê³ ë¦¬ ë³´ë„ˆìŠ¤
                if (category && law.category === category) {
                    score += 20;
                }

                if (score >= 30) {
                    matches.push({ ...law, score: Math.round(score) });
                }
            }

            return matches.sort((a, b) => b.score - a.score).slice(0, 3);
        }

        function showMatchingResults(title, matches) {
            const resultsDiv = document.getElementById('matching-results');
            const matchList = document.getElementById('match-list');

            resultsDiv.style.display = 'block';

            if (matches.length === 0) {
                matchList.innerHTML = `
                    <div class="match-item">
                        <div>ë§¤ì¹­ë˜ëŠ” 2025ë…„ ë²•ê·œê°€ ì—†ìŠµë‹ˆë‹¤</div>
                    </div>
                `;
            } else {
                matchList.innerHTML = matches.map(match => `
                    <div class="match-item">
                        <div>
                            <strong>${match.title}</strong><br>
                            <small>ì‹œí–‰ì¼: ${match.effectiveDate} | ì¹´í…Œê³ ë¦¬: ${match.category}</small>
                        </div>
                        <div class="match-score">${match.score}% ì¼ì¹˜</div>
                    </div>
                `).join('');
            }
        }

        function updateStatistics() {
            document.getElementById('total-base').textContent = baseLaws;
            document.getElementById('total-matched').textContent = matchedLaws;
            const rate = Math.round((matchedLaws / baseLaws) * 100);
            document.getElementById('match-rate').textContent = rate + '%';
        }

        function showSuccess(title, matchCount) {
            const msg = document.getElementById('success-msg');
            msg.innerHTML = `âœ… "${title}" ë²•ê·œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ${matchCount}ê°œì˜ 2025ë…„ ë²•ê·œì™€ ë§¤ì¹­ë˜ì—ˆìŠµë‹ˆë‹¤.`;
            msg.style.display = 'block';
            
            // ë©”ì¸ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
            console.log('ğŸ“Š ë©”ì¸ ëŒ€ì‹œë³´ë“œ í†µê³„ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°');
            
            setTimeout(() => {
                msg.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>