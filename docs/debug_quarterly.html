<!DOCTYPE html>
<html>
<head>
    <title>Debug Quarterly Functionality</title>
    <style>
        .quarterly-detail-section {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 8px;
            margin-top: 1rem;
            overflow: hidden;
            transition: all 0.5s ease;
            max-height: 0;
            opacity: 0;
            display: none;
        }
        .quarterly-detail-section.expanded {
            max-height: 2000px;
            opacity: 1;
            display: block !important;
        }
        .quarterly-detail-content {
            padding: 2rem;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>ë¶„ê¸°íƒ­ ê¸°ëŠ¥ ë””ë²„ê¹…</h1>
    
    <button onclick="testShowQuarterlyDetail('Q1')">Q1 ë¶„ê¸° í…ŒìŠ¤íŠ¸</button>
    <button onclick="testShowQuarterlyDetail('Q2')">Q2 ë¶„ê¸° í…ŒìŠ¤íŠ¸</button>
    
    <!-- ë¶„ê¸°ë³„ ìƒì„¸ ì„¹ì…˜ -->
    <div class="quarterly-detail-section" id="quarterly-detail">
        <div class="quarterly-detail-content">
            <!-- ë™ì  ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
        </div>
    </div>
    
    <div id="debug-log"></div>
    
    <script>
        let currentQuarterlyDetail = null;
        
        function log(message) {
            console.log(message);
            const debugLog = document.getElementById('debug-log');
            debugLog.innerHTML += '<p>' + message + '</p>';
        }
        
        function testShowQuarterlyDetail(quarter) {
            log('ğŸ¯ showQuarterlyDetail í•¨ìˆ˜ í˜¸ì¶œ: ' + quarter);
            
            const quarterInfo = {
                'Q1': { title: '1ë¶„ê¸° ê°œì • ë²•ë ¹', period: '2025ë…„ 1~3ì›”', months: [1, 2, 3], icon: 'ğŸŒ±' },
                'Q2': { title: '2ë¶„ê¸° ê°œì • ë²•ë ¹', period: '2025ë…„ 4~6ì›”', months: [4, 5, 6], icon: 'â˜€ï¸' },
                'Q3': { title: '3ë¶„ê¸° ê°œì • ë²•ë ¹', period: '2025ë…„ 7~9ì›”', months: [7, 8, 9], icon: 'ğŸ‚' },
                'Q4': { title: '4ë¶„ê¸° ê°œì • ë²•ë ¹', period: '2025ë…„ 10~12ì›”', months: [10, 11, 12], icon: 'â„ï¸' }
            };
            
            const info = quarterInfo[quarter];
            if (!info) {
                log('âŒ ë¶„ê¸° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + quarter);
                return;
            }
            
            log('âœ… ë¶„ê¸° ì •ë³´ í™•ì¸: ' + info.title);
            
            // 2025ë…„ ë§¤ì¹­ëœ ë²•ê·œ ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œí•˜ì—¬ ë¶„ê¸°ë³„ í•„í„°ë§
            fetch('quarterly_details.json')
                .then(response => {
                    log('ğŸ“¡ quarterly_details.json ìš”ì²­ ì‹œì‘...');
                    if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ' + response.status);
                    return response.json();
                })
                .then(quarterlyData => {
                    log('âœ… quarterly_details.json ë¡œë“œ ì„±ê³µ');
                    const quarterLaws = quarterlyData.quarters[quarter].laws || [];
                    log('ğŸ“‹ ' + quarter + ' ë¶„ê¸° ë²•ë ¹ ìˆ˜: ' + quarterLaws.length + 'ê°œ');
                    
                    // continueShowQuarterlyDetail í˜¸ì¶œ
                    continueShowQuarterlyDetail(quarter, info, quarterLaws);
                })
                .catch(error => {
                    log('âŒ quarterly_details.json ë¡œë“œ ì‹¤íŒ¨: ' + error.message);
                    
                    // í´ë°± ë°ì´í„° ìƒì„±
                    const fallbackLaws = [{
                        title: quarter + ' í…ŒìŠ¤íŠ¸ ë²•ë ¹',
                        effective_date: '2025-03-01',
                        categories: ['í™˜ê²½'],
                        ministry: 'í…ŒìŠ¤íŠ¸ë¶€ì²˜',
                        law_type: 'ì¼ë¶€ê°œì •',
                        detail_url: 'https://www.law.go.kr'
                    }];
                    continueShowQuarterlyDetail(quarter, info, fallbackLaws);
                });
        }
        
        function continueShowQuarterlyDetail(quarter, info, quarterLaws) {
            log('ğŸš€ continueShowQuarterlyDetail í˜¸ì¶œ: ' + quarter + ', ë²•ë ¹ ìˆ˜: ' + quarterLaws.length);
            showQuarterlyModal(quarter, info, quarterLaws);
        }
        
        function showQuarterlyModal(quarter, info, quarterLaws) {
            log('ğŸ“± showQuarterlyModal í˜¸ì¶œ ì‹œì‘');
            
            // ê°„ë‹¨í•œ ë‚´ìš© ìƒì„±
            const detailContent = `
                <div style="padding: 20px;">
                    <h2>${info.icon} ${info.title}</h2>
                    <p><strong>ê¸°ê°„:</strong> ${info.period}</p>
                    <p><strong>ë²•ë ¹ ìˆ˜:</strong> ${quarterLaws.length}ê±´</p>
                    <button onclick="closeQuarterlyDetail()">ë‹«ê¸°</button>
                    
                    <h3>ë²•ë ¹ ëª©ë¡:</h3>
                    <ul>
                        ${quarterLaws.slice(0, 5).map(law => `
                            <li><strong>${law.title}</strong> (${law.effective_date})</li>
                        `).join('')}
                    </ul>
                </div>
            `;
            
            // ë‚´ìš© ì‚½ì… ë° ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
            const detailSection = document.getElementById('quarterly-detail');
            const contentDiv = detailSection.querySelector('.quarterly-detail-content');
            contentDiv.innerHTML = detailContent;
            
            log('ğŸ“„ ë‚´ìš© ì‚½ì… ì™„ë£Œ');
            
            // ìŠ¬ë¼ì´ë“œ ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜
            detailSection.style.display = 'block';
            setTimeout(() => {
                detailSection.classList.add('expanded');
                log('âœ¨ ìŠ¬ë¼ì´ë“œ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘');
            }, 10);
            
            currentQuarterlyDetail = quarter;
            
            // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤
            setTimeout(() => {
                detailSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                log('ğŸ“ ìŠ¤í¬ë¡¤ ì´ë™ ì™„ë£Œ');
            }, 300);
        }
        
        function closeQuarterlyDetail() {
            log('âŒ closeQuarterlyDetail í˜¸ì¶œ');
            const detailSection = document.getElementById('quarterly-detail');
            detailSection.classList.remove('expanded');
            
            setTimeout(() => {
                detailSection.style.display = 'none';
                log('ğŸ”’ ìŠ¬ë¼ì´ë“œ ë‹«ê¸° ì™„ë£Œ');
            }, 500);
            
            currentQuarterlyDetail = null;
        }
    </script>
</body>
</html>