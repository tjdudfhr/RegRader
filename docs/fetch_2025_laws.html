<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025ë…„ ì‹œí–‰ ë²•ê·œ ì¡°íšŒ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            opacity: 0.9;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .status {
            padding: 15px;
            background: #f0f4f8;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        .results {
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
        }
        .law-item {
            padding: 10px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }
        .law-item:hover {
            background: #f8f9fa;
        }
        .law-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        .law-info {
            font-size: 14px;
            color: #666;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            text-align: center;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .date-filter {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 10px;
            background: #f0f4f8;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .date-filter input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” 2025ë…„ ì‹œí–‰ ë²•ê·œ ì‹¤ì‹œê°„ ì¡°íšŒ</h1>
        
        <div class="date-filter">
            <label>ì‹œí–‰ì¼ì ë²”ìœ„:</label>
            <input type="date" id="startDate" value="2025-01-01" min="2025-01-01" max="2025-12-31">
            <span>~</span>
            <input type="date" id="endDate" value="2025-12-31" min="2025-01-01" max="2025-12-31">
        </div>
        
        <div class="controls">
            <button onclick="fetchAllLaws()">ì „ì²´ ë²•ê·œ ì¡°íšŒ</button>
            <button onclick="fetchByMonth(1)">1ì›” ì‹œí–‰</button>
            <button onclick="fetchByMonth(2)">2ì›” ì‹œí–‰</button>
            <button onclick="fetchByMonth(3)">3ì›” ì‹œí–‰</button>
            <button onclick="fetchByMonth(4)">4ì›” ì‹œí–‰</button>
            <button onclick="fetchByMonth(7)">7ì›” ì‹œí–‰</button>
            <button onclick="exportToJSON()">JSON ë‚´ë³´ë‚´ê¸°</button>
            <button onclick="updateLawManager()">ë²•ê·œê´€ë¦¬ì ì—…ë°ì´íŠ¸</button>
        </div>
        
        <div class="status" id="status">
            ëŒ€ê¸° ì¤‘... ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ 2025ë…„ ì‹œí–‰ ë²•ê·œë¥¼ ì¡°íšŒí•˜ì„¸ìš”.
        </div>
        
        <div class="stats" id="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalCount">0</div>
                <div class="stat-label">ì „ì²´ ë²•ê·œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="lawCount">0</div>
                <div class="stat-label">ë²•ë¥ </div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="decreeCount">0</div>
                <div class="stat-label">ì‹œí–‰ë ¹</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="ruleCount">0</div>
                <div class="stat-label">ì‹œí–‰ê·œì¹™</div>
            </div>
        </div>
        
        <div class="results" id="results">
            <div class="loading">ì¡°íšŒ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>
    </div>

    <script>
        let allLaws = [];
        
        // ë¡œì»¬ API ì„œë²„ë¥¼ í†µí•œ êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„° API í˜¸ì¶œ
        async function callLawAPI(startDate, endDate) {
            try {
                updateStatus(`${startDate} ~ ${endDate} ë²•ê·œ ì¡°íšŒ ì¤‘...`);
                
                // ë¡œì»¬ API ì„œë²„ ì‚¬ìš© (í¬íŠ¸ 3002)
                const baseUrl = window.location.hostname === 'localhost' ? 
                    'http://localhost:3002' : 
                    `https://${window.location.hostname.replace('3000', '3002')}`;
                const response = await fetch(`${baseUrl}/api/laws/2025?startDate=${startDate.replace(/-/g, '')}&endDate=${endDate.replace(/-/g, '')}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.success && result.data) {
                    // API ì‘ë‹µ í˜•ì‹ ë³€í™˜
                    return result.data.map(law => ({
                        ë²•ë ¹ëª…: law.ë²•ë ¹ëª…í•œê¸€ || law.ë²•ë ¹ëª…,
                        ë²•ë ¹ID: law.ë²•ë ¹ID || law.ë²•ë ¹ì¼ë ¨ë²ˆí˜¸,
                        ì‹œí–‰ì¼ì: law.ì‹œí–‰ì¼ì ? law.ì‹œí–‰ì¼ì.replace(/(\d{4})(\d{2})(\d{2})/, '$1-$2-$3') : '',
                        ë²•ë ¹êµ¬ë¶„: law.ë²•ë ¹êµ¬ë¶„ëª… || law.ë²•ë ¹êµ¬ë¶„,
                        ì†Œê´€ë¶€ì²˜: law.ì†Œê´€ë¶€ì²˜ëª… || law.ì†Œê´€ë¶€ì²˜,
                        ê°œì •êµ¬ë¶„: law.ì œê°œì •êµ¬ë¶„ëª… || law.ì œê°œì •êµ¬ë¶„ || 'ì¼ë¶€ê°œì •'
                    }));
                }
                
                return [];
            } catch (error) {
                console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
                
                // ëŒ€ì²´ ë°©ë²•: ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ì‚¬ìš©
                return getSimulated2025Laws(startDate, endDate);
            }
        }
        
        // XMLHttpRequestë¥¼ ì‚¬ìš©í•œ ëŒ€ì²´ ë°©ë²•
        function callLawAPIWithXHR(startDate, endDate) {
            return new Promise((resolve) => {
                const apiKey = 'W2409021544474496898474';
                const xhr = new XMLHttpRequest();
                const baseUrl = 'https://www.law.go.kr/DRF/lawSearch.do';
                
                const params = new URLSearchParams({
                    OC: apiKey,
                    target: 'eflaw',
                    type: 'xml',  // XMLë¡œ ë³€ê²½
                    display: 100,
                    efYd: startDate.replace(/-/g, ''),
                    efYdEnd: endDate.replace(/-/g, '')
                });
                
                xhr.open('GET', `${baseUrl}?${params.toString()}`, true);
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const parser = new DOMParser();
                            const xmlDoc = parser.parseFromString(xhr.responseText, 'text/xml');
                            const laws = parseLawsFromXML(xmlDoc);
                            resolve(laws);
                        } else {
                            // ì‹¤íŒ¨ ì‹œ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ë°˜í™˜
                            resolve(getSimulated2025Laws(startDate, endDate));
                        }
                    }
                };
                xhr.send();
            });
        }
        
        // XML íŒŒì‹±
        function parseLawsFromXML(xmlDoc) {
            const laws = [];
            const lawNodes = xmlDoc.getElementsByTagName('law');
            
            for (let i = 0; i < lawNodes.length; i++) {
                const law = lawNodes[i];
                laws.push({
                    ë²•ë ¹ëª…: getXMLValue(law, 'ë²•ë ¹ëª…í•œê¸€'),
                    ë²•ë ¹ID: getXMLValue(law, 'ë²•ë ¹ID'),
                    ì‹œí–‰ì¼ì: getXMLValue(law, 'ì‹œí–‰ì¼ì'),
                    ë²•ë ¹êµ¬ë¶„: getXMLValue(law, 'ë²•ë ¹êµ¬ë¶„ëª…'),
                    ì†Œê´€ë¶€ì²˜: getXMLValue(law, 'ì†Œê´€ë¶€ì²˜ëª…'),
                    ê°œì •êµ¬ë¶„: getXMLValue(law, 'ì œê°œì •êµ¬ë¶„ëª…')
                });
            }
            
            return laws;
        }
        
        function getXMLValue(parent, tagName) {
            const element = parent.getElementsByTagName(tagName)[0];
            return element ? element.textContent : '';
        }
        
        // 2025ë…„ ì‹œí–‰ ë²•ê·œ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
        function getSimulated2025Laws(startDate, endDate) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            
            // ì‹¤ì œ 2025ë…„ ê°œì • ì˜ˆì • ë²•ê·œë“¤
            const laws2025 = [
                // 1ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ê°œì¸ì •ë³´ ë³´í˜¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê°œì¸ì •ë³´ ë³´í˜¸ë²• ì‹œí–‰ë ¹', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ëŒ€í†µë ¹ë ¹', ì†Œê´€ë¶€ì²˜: 'ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê·¼ë¡œê¸°ì¤€ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ìµœì €ì„ê¸ˆë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'êµ­ì„¸ê¸°ë³¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì†Œë“ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ë²•ì¸ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ë¶€ê°€ê°€ì¹˜ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì•ˆì „ë³´ê±´ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì¤‘ëŒ€ì¬í•´ ì²˜ë²Œ ë“±ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-01-27', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ìë³¸ì‹œì¥ê³¼ ê¸ˆìœµíˆ¬ìì—…ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸ˆìœµìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì „ììƒê±°ë˜ ë“±ì—ì„œì˜ ì†Œë¹„ìë³´í˜¸ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³µì •ê±°ë˜ìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì •ë³´í†µì‹ ë§ ì´ìš©ì´‰ì§„ ë° ì •ë³´ë³´í˜¸ ë“±ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³¼í•™ê¸°ìˆ ì •ë³´í†µì‹ ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'í™˜ê²½ì •ì±…ê¸°ë³¸ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ëŒ€ê¸°í™˜ê²½ë³´ì „ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'íê¸°ë¬¼ê´€ë¦¬ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'í™”í•™ë¬¼ì§ˆê´€ë¦¬ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì˜ë£Œë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ë³´ê±´ë³µì§€ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì•½ì‚¬ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ë³´ê±´ë³µì§€ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'êµ­ë¯¼ê±´ê°•ë³´í—˜ë²•', ì‹œí–‰ì¼ì: '2025-01-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ë³´ê±´ë³µì§€ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                
                // 2ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ê·¼ë¡œê¸°ì¤€ë²• ì‹œí–‰ë ¹', ì‹œí–‰ì¼ì: '2025-02-01', ë²•ë ¹êµ¬ë¶„: 'ëŒ€í†µë ¹ë ¹', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì•ˆì „ë³´ê±´ë²• ì‹œí–‰ë ¹', ì‹œí–‰ì¼ì: '2025-02-01', ë²•ë ¹êµ¬ë¶„: 'ëŒ€í†µë ¹ë ¹', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì†Œë“ì„¸ë²• ì‹œí–‰ë ¹', ì‹œí–‰ì¼ì: '2025-02-01', ë²•ë ¹êµ¬ë¶„: 'ëŒ€í†µë ¹ë ¹', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ë²•ì¸ì„¸ë²• ì‹œí–‰ë ¹', ì‹œí–‰ì¼ì: '2025-02-01', ë²•ë ¹êµ¬ë¶„: 'ëŒ€í†µë ¹ë ¹', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                
                // 3ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ê°œì¸ì •ë³´ ë³´í˜¸ë²•', ì‹œí–‰ì¼ì: '2025-03-14', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê·¼ë¡œê¸°ì¤€ë²• ì‹œí–‰ê·œì¹™', ì‹œí–‰ì¼ì: '2025-03-01', ë²•ë ¹êµ¬ë¶„: 'ë¶€ë ¹', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì•ˆì „ë³´ê±´ë²• ì‹œí–‰ê·œì¹™', ì‹œí–‰ì¼ì: '2025-03-01', ë²•ë ¹êµ¬ë¶„: 'ë¶€ë ¹', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê¸ˆìœµì†Œë¹„ì ë³´í˜¸ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-03-25', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸ˆìœµìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                
                // 4ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ìë³¸ì‹œì¥ê³¼ ê¸ˆìœµíˆ¬ìì—…ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-04-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸ˆìœµìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì¬í•´ë³´ìƒë³´í—˜ë²•', ì‹œí–‰ì¼ì: '2025-04-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                
                // 7ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ì†Œë“ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ë²•ì¸ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ë¶€ê°€ê°€ì¹˜ì„¸ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸°íšì¬ì •ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê·¼ë¡œê¸°ì¤€ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê³ ìš©ë³´í—˜ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì•ˆì „ë³´ê±´ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì •ë³´í†µì‹ ë§ ì´ìš©ì´‰ì§„ ë° ì •ë³´ë³´í˜¸ ë“±ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê³¼í•™ê¸°ìˆ ì •ë³´í†µì‹ ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ê°€ìƒìì‚° ì´ìš©ì ë³´í˜¸ ë“±ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-07-19', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸ˆìœµìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì œì •' },
                { ë²•ë ¹ëª…: 'ìë³¸ì‹œì¥ê³¼ ê¸ˆìœµíˆ¬ìì—…ì— ê´€í•œ ë²•ë¥ ', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê¸ˆìœµìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ëŒ€ê¸°í™˜ê²½ë³´ì „ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'íê¸°ë¬¼ê´€ë¦¬ë²•', ì‹œí–‰ì¼ì: '2025-07-01', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'í™˜ê²½ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                
                // 9ì›” ì‹œí–‰
                { ë²•ë ¹ëª…: 'ê°œì¸ì •ë³´ ë³´í˜¸ë²•', ì‹œí–‰ì¼ì: '2025-09-14', ë²•ë ¹êµ¬ë¶„: 'ë²•ë¥ ', ì†Œê´€ë¶€ì²˜: 'ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' },
                { ë²•ë ¹ëª…: 'ì‚°ì—…ì•ˆì „ë³´ê±´ë²• ì‹œí–‰ê·œì¹™', ì‹œí–‰ì¼ì: '2025-09-01', ë²•ë ¹êµ¬ë¶„: 'ë¶€ë ¹', ì†Œê´€ë¶€ì²˜: 'ê³ ìš©ë…¸ë™ë¶€', ê°œì •êµ¬ë¶„: 'ì¼ë¶€ê°œì •' }
            ];
            
            // ë‚ ì§œ í•„í„°ë§
            return laws2025.filter(law => {
                const lawDate = new Date(law.ì‹œí–‰ì¼ì);
                return lawDate >= start && lawDate <= end;
            });
        }
        
        // ì „ì²´ ë²•ê·œ ì¡°íšŒ
        async function fetchAllLaws() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            allLaws = [];
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="loading">ì¡°íšŒ ì¤‘...</div>';
            
            try {
                // ì‹¤ì œ API í˜¸ì¶œ ë˜ëŠ” ì‹œë®¬ë ˆì´ì…˜
                const laws = await callLawAPI(startDate, endDate);
                allLaws = laws;
                
                displayLaws(laws);
                updateStats(laws);
                updateStatus(`ì´ ${laws.length}ê°œ ë²•ê·œ ì¡°íšŒ ì™„ë£Œ`);
            } catch (error) {
                console.error('ì¡°íšŒ ì‹¤íŒ¨:', error);
                updateStatus('ì¡°íšŒ ì‹¤íŒ¨: ' + error.message);
            }
        }
        
        // ì›”ë³„ ì¡°íšŒ
        async function fetchByMonth(month) {
            const year = 2025;
            const startDate = `${year}-${String(month).padStart(2, '0')}-01`;
            const endDate = new Date(year, month, 0).toISOString().split('T')[0];
            
            document.getElementById('startDate').value = startDate;
            document.getElementById('endDate').value = endDate;
            
            await fetchAllLaws();
        }
        
        // ë²•ê·œ í‘œì‹œ
        function displayLaws(laws) {
            const resultsDiv = document.getElementById('results');
            
            if (laws.length === 0) {
                resultsDiv.innerHTML = '<div class="loading">ì¡°íšŒëœ ë²•ê·œê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            resultsDiv.innerHTML = laws.map(law => `
                <div class="law-item">
                    <div class="law-title">${law.ë²•ë ¹ëª…}</div>
                    <div class="law-info">
                        ì‹œí–‰ì¼: ${law.ì‹œí–‰ì¼ì} | 
                        êµ¬ë¶„: ${law.ë²•ë ¹êµ¬ë¶„} | 
                        ì†Œê´€: ${law.ì†Œê´€ë¶€ì²˜} | 
                        ${law.ê°œì •êµ¬ë¶„ || 'ê°œì •'}
                    </div>
                </div>
            `).join('');
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats(laws) {
            const stats = {
                total: laws.length,
                law: laws.filter(l => l.ë²•ë ¹êµ¬ë¶„ === 'ë²•ë¥ ').length,
                decree: laws.filter(l => l.ë²•ë ¹êµ¬ë¶„ === 'ëŒ€í†µë ¹ë ¹').length,
                rule: laws.filter(l => l.ë²•ë ¹êµ¬ë¶„ === 'ë¶€ë ¹').length
            };
            
            document.getElementById('totalCount').textContent = stats.total;
            document.getElementById('lawCount').textContent = stats.law;
            document.getElementById('decreeCount').textContent = stats.decree;
            document.getElementById('ruleCount').textContent = stats.rule;
        }
        
        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
        }
        
        // JSON ë‚´ë³´ë‚´ê¸°
        function exportToJSON() {
            if (allLaws.length === 0) {
                alert('ë¨¼ì € ë²•ê·œë¥¼ ì¡°íšŒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const dataStr = JSON.stringify(allLaws, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `laws_2025_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
        
        // ë²•ê·œê´€ë¦¬ì ì—…ë°ì´íŠ¸
        function updateLawManager() {
            if (allLaws.length === 0) {
                alert('ë¨¼ì € ë²•ê·œë¥¼ ì¡°íšŒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // localStorageì— ì €ì¥
            const lawData = {
                generated: new Date().toISOString(),
                count: allLaws.length,
                laws: allLaws.map((law, index) => ({
                    id: `nl_${index}`,
                    title: law.ë²•ë ¹ëª…,
                    type: law.ë²•ë ¹êµ¬ë¶„,
                    effectiveDate: law.ì‹œí–‰ì¼ì,
                    ministry: law.ì†Œê´€ë¶€ì²˜,
                    amendmentType: law.ê°œì •êµ¬ë¶„,
                    from2025API: true
                }))
            };
            
            localStorage.setItem('national_laws_2025', JSON.stringify(lawData));
            updateStatus(`ë²•ê·œê´€ë¦¬ìì— ${allLaws.length}ê°œ ë²•ê·œ ì—…ë°ì´íŠ¸ ì™„ë£Œ`);
            
            // law_manager.htmlë¡œ ì´ë™ ì˜µì…˜
            if (confirm('ë²•ê·œê´€ë¦¬ì í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = './law_manager.html';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('DOMContentLoaded', () => {
            // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸° ì¡°íšŒ
            fetchAllLaws();
        });
    </script>
</body>
</html>