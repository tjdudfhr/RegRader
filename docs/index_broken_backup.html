<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öñÔ∏è LAW WATCH ¬∑ Ïä§ÎßàÌä∏ Î≤ïÎ†π ÎåÄÏãúÎ≥¥Îìú</title>
    <link rel="shortcut icon" href="data:text/plain;base64,üìä">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #667eea;
            --primary-light: #764ba2;
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary: #f093fb;
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent: #4facfe;
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success: #11998e;
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --warning: #f093fb;
            --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --danger: #fc466b;
            --danger-gradient: linear-gradient(135deg, #fc466b 0%, #3f5efb 100%);
            
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            
            --text-primary: #1a202c;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --text-white: #ffffff;
            
            --bg-primary: #f7fafc;
            --bg-secondary: #edf2f7;
            --bg-card: #ffffff;
            --bg-glass: rgba(255, 255, 255, 0.25);
            --border: #e2e8f0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            
            --c-safety: #48bb78;
            --c-env: #38b2ac;
            --c-hr: #ed8936;
            --c-gov: #9f7aea;
            --c-fin: #4299e1;
            --c-sec: #f56565;
            --c-etc: #a0aec0;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-primary: #f7fafc;
                --text-secondary: #e2e8f0;
                --text-muted: #a0aec0;
                --bg-primary: #1a202c;
                --bg-secondary: #2d3748;
                --bg-card: #2d3748;
                --bg-glass: rgba(45, 55, 72, 0.25);
                --border: #4a5568;
                --glass-bg: rgba(45, 55, 72, 0.1);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            background-image: 
                radial-gradient(circle at 25% 25%, #667eea22 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #f093fb22 0%, transparent 50%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Glassmorphism Header */
        .header {
            background: var(--primary-gradient);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1rem;
            color: var(--text-white);
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .header .meta {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .header .meta a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .header .meta a:hover {
            border-bottom-color: white;
        }

        /* Business Filter */
        .business-filter {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--glass-shadow);
        }

        .filter-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .filter-tab {
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 500;
            white-space: nowrap;
        }

        .filter-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .filter-tab.active {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        /* GitHub Floating Button */
        .github-float {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--glass-shadow);
        }

        .github-float:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        /* Stats Grid with Advanced Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.25rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--glass-shadow);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--card-gradient);
            opacity: 0.1;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        }

        .stat-card:hover::before {
            opacity: 0.2;
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
            position: relative;
            z-index: 1;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 20px;
            background: var(--card-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: white;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .stat-trend {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            background: rgba(72, 187, 120, 0.1);
            color: var(--success);
            border-radius: 12px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
            position: relative;
            z-index: 1;
        }

        .stat-label {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.85rem;
            position: relative;
            z-index: 1;
        }

        .stat-description {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            position: relative;
            z-index: 1;
        }

        /* Main Content Layout */
        .main-content {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        /* Sidebar with Charts */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .chart-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: var(--glass-shadow);
            position: relative;
            overflow: hidden;
        }

        .chart-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--accent-gradient);
            border-radius: 24px 24px 0 0;
        }

        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .chart-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .legend-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .legend-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .legend-count {
            font-weight: 700;
            color: var(--text-primary);
            margin-left: auto;
        }

        /* Law List with Enhanced Cards */
        .law-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: var(--glass-shadow);
        }

        .law-list-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .law-list-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .law-count {
            background: var(--primary-gradient);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .law-search {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .search-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .law-list {
            max-height: 800px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .law-list::-webkit-scrollbar {
            width: 6px;
        }

        .law-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .law-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }

        .law-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.25rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .law-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--primary-gradient);
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .law-item:hover {
            background: rgba(255, 255, 255, 0.05);
            margin: 0 -1.5rem;
            padding: 1.25rem 1.5rem;
            border-radius: 16px;
            border-bottom: 1px solid transparent;
        }

        .law-item:hover::before {
            opacity: 1;
        }

        .law-item:last-child {
            border-bottom: none;
        }

        .law-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            font-size: 1.05rem;
        }

        .law-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .law-meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .law-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .category-tag {
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            background: var(--tag-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .date-badge {
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .date-badge.urgent {
            background: var(--danger-gradient);
            color: white;
            animation: pulse 2s infinite;
        }

        .date-badge.soon {
            background: var(--warning-gradient);
            color: white;
        }

        .date-badge.future {
            background: var(--accent-gradient);
            color: white;
        }

        .date-badge.active {
            background: var(--success-gradient);
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Enhanced Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px);
            z-index: 2000;
            animation: modalFadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 24px;
            max-width: 900px;
            max-height: 85vh;
            width: 90vw;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            animation: modalSlideIn 0.3s ease;
            color: var(--text-primary);
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.9) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .modal-header {
            background: var(--primary-gradient);
            color: white;
            padding: 2rem;
            position: relative;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .modal-subtitle {
            opacity: 0.9;
            font-size: 1rem;
            font-weight: 500;
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.9);
            color: #2d3748;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .info-item {
            padding: 1.25rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 16px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #2d3748;
        }

        .info-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .amendment-summary {
            background: var(--bg-glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .summary-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .summary-content {
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .summary-section {
            margin-bottom: 1rem;
        }

        .summary-section h4 {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .amendment-box {
            background: rgba(102, 126, 234, 0.08);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            border-radius: 8px;
            margin: 0.5rem 0;
        }
        
        .amendment-box p {
            margin-bottom: 0.75rem;
            color: #2d3748;
            line-height: 1.5;
        }
        
        .amendment-box ul {
            margin-left: 1rem;
            color: #2d3748;
            padding-left: 1rem;
        }
        
        .amendment-box ul li {
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }
        
        .amendment-box em {
            color: #718096;
            font-size: 0.9rem;
        }
        
        /* Quarterly View Styles */
        .quarterly-view {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--glass-shadow);
        }
        
        .quarterly-tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .quarterly-tab {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .quarterly-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }
        
        .quarterly-tab:hover::before {
            opacity: 0.1;
        }
        
        .quarterly-tab:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: 0 12px 24px rgba(102, 126, 234, 0.2);
        }
        
        .quarter-icon {
            font-size: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .quarter-info {
            position: relative;
            z-index: 1;
            flex: 1;
        }
        
        .quarter-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .quarter-period {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .quarter-count {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }
        
        /* Quarterly Modal Styles */
        .quarterly-summary {
            margin-bottom: 2rem;
        }
        
        .quarterly-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .quarterly-stat {
            text-align: center;
            padding: 1rem;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .quarterly-stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }
        
        .quarterly-stat-value.quarterly-urgent {
            color: #f56565;
        }
        
        .quarterly-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 600;
        }
        
        .quarterly-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .quarterly-detail-section h4 {
            color: var(--primary);
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .quarterly-detail-section ul {
            list-style: none;
            padding: 0;
        }
        
        .quarterly-detail-section li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            color: #2d3748;
        }
        
        .quarterly-detail-section li:last-child {
            border-bottom: none;
        }
        
        .quarterly-law-header {
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }
        
        .quarterly-law-header h4 {
            color: var(--primary);
            font-size: 1rem;
            font-weight: 700;
            margin: 0;
        }
        
        .quarterly-laws {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .quarterly-law-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            border-left: 4px solid var(--border);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quarterly-law-item:hover {
            background: rgba(102, 126, 234, 0.05);
            transform: translateX(4px);
        }
        
        .quarterly-law-item.urgent {
            border-left-color: #f56565;
            background: rgba(245, 101, 101, 0.05);
        }
        
        .quarterly-law-item.warning {
            border-left-color: #ed8936;
            background: rgba(237, 137, 54, 0.05);
        }
        
        .quarterly-law-info {
            flex: 1;
        }
        
        .quarterly-law-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }
        
        .quarterly-law-meta {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .quarterly-law-meta span {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 6px;
            color: var(--text-muted);
        }
        
        .quarterly-law-date {
            font-weight: 700;
            font-size: 0.9rem;
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            white-space: nowrap;
        }
        
        .quarterly-law-date.urgent {
            background: #f56565;
            color: white;
        }
        
        .quarterly-law-date.warning {
            background: #ed8936;
            color: white;
        }
        
        .quarterly-law-date.normal {
            background: #4299e1;
            color: white;
        }
        
        .no-laws {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .external-links {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .external-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary-gradient);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .external-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .external-link.secondary {
            background: var(--secondary-gradient);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 350px 1fr;
            }
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: -1;
                flex-direction: row;
                overflow-x: auto;
            }
            
            .chart-card {
                min-width: 300px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0.5rem;
            }
            
            .header {
                padding: 2rem 1.5rem;
                border-radius: 20px;
            }
            
            .header h1 {
                font-size: 2.25rem;
            }
            
            .github-float {
                position: static;
                display: inline-block;
                margin-top: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-tabs {
                justify-content: center;
            }
            
            .modal-content {
                width: 95vw;
                max-height: 90vh;
            }
            
            .modal-body {
                padding: 1.5rem;
            }
            
            .sidebar {
                flex-direction: column;
            }
            
            .chart-card {
                min-width: auto;
            }
        }

        .loading {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-secondary);
        }

        .loading::before {
            content: '‚ö°';
            font-size: 2rem;
            display: block;
            margin-bottom: 1rem;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .error {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--danger);
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Floating GitHub Button -->
        <a href="https://github.com/tjdudfhr/law-watch" target="_blank" class="github-float">
            üìÅ GitHub
        </a>

        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>‚öñÔ∏è LAW WATCH</h1>
                <div class="subtitle">Ïä§ÎßàÌä∏ Î≤ïÎ†π Î∂ÑÏÑù ÎåÄÏãúÎ≥¥Îìú ¬∑ <span id="year">2025</span></div>
                <div class="meta">
                    Ïã§ÏãúÍ∞Ñ Î≤ïÎ†π Îç∞Ïù¥ÌÑ∞ ¬∑ <a href="./index.json" target="_blank">API</a> ¬∑ 
                    ÏµúÏ¢Ö ÏóÖÎç∞Ïù¥Ìä∏: <span id="timestamp">Î°úÎî© Ï§ë...</span>
                </div>
            </div>
        </div>

        </div>

        <!-- Quarterly View -->
        <div class="quarterly-view">
            <div class="filter-title">
                üìÖ 2025ÎÖÑ Î∂ÑÍ∏∞Î≥Ñ Í∞úÏ†ï ÌòÑÌô©
            </div>
            <div class="quarterly-tabs">
                <div class="quarterly-tab" data-quarter="Q1">
                    <div class="quarter-icon">üå±</div>
                    <div class="quarter-info">
                        <div class="quarter-title">1Î∂ÑÍ∏∞</div>
                        <div class="quarter-period">(1-3Ïõî)</div>
                        <div class="quarter-count" id="q1-count">0</div>
                    </div>
                </div>
                <div class="quarterly-tab" data-quarter="Q2">
                    <div class="quarter-icon">‚òÄÔ∏è</div>
                    <div class="quarter-info">
                        <div class="quarter-title">2Î∂ÑÍ∏∞</div>
                        <div class="quarter-period">(4-6Ïõî)</div>
                        <div class="quarter-count" id="q2-count">0</div>
                    </div>
                </div>
                <div class="quarterly-tab" data-quarter="Q3">
                    <div class="quarter-icon">üçÇ</div>
                    <div class="quarter-info">
                        <div class="quarter-title">3Î∂ÑÍ∏∞</div>
                        <div class="quarter-period">(7-9Ïõî)</div>
                        <div class="quarter-count" id="q3-count">0</div>
                    </div>
                </div>
                <div class="quarterly-tab" data-quarter="Q4">
                    <div class="quarter-icon">‚ùÑÔ∏è</div>
                    <div class="quarter-info">
                        <div class="quarter-title">4Î∂ÑÍ∏∞</div>
                        <div class="quarter-period">(10-12Ïõî)</div>
                        <div class="quarter-count" id="q4-count">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Business Filter -->
        <div class="business-filter">
            <div class="filter-title">
                üè¢ ÏóÖÎ¨¥Î≥Ñ Î≤ïÎ†π ÌïÑÌÑ∞ÎßÅ
            </div>
            <div class="filter-tabs">
                <div class="filter-tab active" data-filter="all">Ï†ÑÏ≤¥</div>
                <div class="filter-tab" data-filter="ÏïàÏ†Ñ">üõ°Ô∏è ÏïàÏ†ÑÍ¥ÄÎ¶¨</div>
                <div class="filter-tab" data-filter="ÌôòÍ≤Ω">üå± ÌôòÍ≤Ω</div>
                <div class="filter-tab" data-filter="Ïù∏ÏÇ¨ÎÖ∏Î¨¥">üë• Ïù∏ÏÇ¨ÎÖ∏Î¨¥</div>
                <div class="filter-tab" data-filter="ÏßÄÎ∞∞Íµ¨Ï°∞">üèõÔ∏è ÏßÄÎ∞∞Íµ¨Ï°∞</div>
                <div class="filter-tab" data-filter="Ïû¨Î¨¥ÌöåÍ≥Ñ">üí∞ Ïû¨Î¨¥ÌöåÍ≥Ñ</div>
                <div class="filter-tab" data-filter="Ï†ïÎ≥¥Î≥¥Ìò∏">üîí Ï†ïÎ≥¥Î≥¥Ìò∏</div>
                <div class="filter-tab" data-filter="Í∏∞ÌÉÄ">üìã Í∏∞ÌÉÄ</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar with Charts -->
            <div class="sidebar">
                <!-- Category Distribution Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <div class="chart-title">üìà ÏóÖÎ¨¥ Î∂ÑÏïºÎ≥Ñ Î∂ÑÌè¨</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <div class="chart-legend" id="categoryLegend">
                        Î°úÎî© Ï§ë...
                    </div>
                </div>

            </div>

            <!-- Law List -->
            <div class="law-card">
                <div class="law-list-header">
                    <div class="law-list-title">
                        üìã Í∞úÏ†ï Î≤ïÎ†π Î™©Î°ù
                        <div class="law-count" id="law-count">Î°úÎî© Ï§ë...</div>
                    </div>
                </div>
                
                <div class="law-search">
                    <input type="text" class="search-input" id="searchInput" placeholder="Î≤ïÎ†πÎ™Ö, ÏÜåÍ¥ÄÎ∂ÄÏ≤ò, Ïπ¥ÌÖåÍ≥†Î¶¨Î°ú Í≤ÄÏÉâ...">
                    <button class="search-btn" onclick="searchLaws()">üîç Í≤ÄÏÉâ</button>
                </div>
                
                <div class="law-list" id="law-list">
                    <div class="loading">Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Modal -->
    <div id="law-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">Î≤ïÎ†π Ï†úÎ™©</div>
                <div class="modal-subtitle" id="modal-subtitle">Î≤ïÎ†π Ï†ïÎ≥¥</div>
                <button class="modal-close" onclick="closeLawModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-grid" id="modal-info">
                    <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                </div>
                
                <!-- AI ÏöîÏïΩ ÏÑπÏÖò -->
                <div class="amendment-summary">
                    <div class="summary-title">
                        ü§ñ AI ÌïµÏã¨ ÏöîÏïΩ
                    </div>
                    <div class="summary-content" id="modal-summary">
                        <!-- ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ± -->
                    </div>
                </div>
                
                <div class="external-links">
                    <a href="#" id="modal-law-link" target="_blank" class="external-link">
                        üîó Íµ≠Í∞ÄÎ≤ïÎ†πÏ†ïÎ≥¥ÏÑºÌÑ∞
                    </a>
                    <a href="#" id="modal-search-link" target="_blank" class="external-link secondary">
                        üîç Î≤ïÎ†π Í≤ÄÏÉâ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Quarterly Modal -->
    <div id="quarterly-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="quarterly-modal-title">Î∂ÑÍ∏∞Î≥Ñ Í∞úÏ†ï Î≤ïÎ†π</div>
                <div class="modal-subtitle" id="quarterly-modal-subtitle">Î∂ÑÍ∏∞ Ï†ïÎ≥¥</div>
                <button class="modal-close" onclick="closeQuarterlyModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="quarterly-summary" class="quarterly-summary">
                    <!-- Î∂ÑÍ∏∞Î≥Ñ ÏöîÏïΩ Ï†ïÎ≥¥ -->
                </div>
                <div id="quarterly-law-list" class="quarterly-law-list">
                    <!-- Î∂ÑÍ∏∞Î≥Ñ Î≤ïÎ†π Î¶¨Ïä§Ìä∏ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        const categoryColors = {
            'ÏïàÏ†Ñ': '#48bb78',
            'ÌôòÍ≤Ω': '#38b2ac', 
            'Ïù∏ÏÇ¨ÎÖ∏Î¨¥': '#ed8936',
            'ÏßÄÎ∞∞Íµ¨Ï°∞': '#9f7aea',
            'Ïû¨Î¨¥ÌöåÍ≥Ñ': '#4299e1',
            'Ï†ïÎ≥¥Î≥¥Ìò∏': '#f56565',
            'Í∏∞ÌÉÄ': '#a0aec0'
        };

        let lawsData = [];
        let filteredLaws = [];
        let currentFilter = 'all';
        let categoryChart;

        // Initialize
        document.addEventListener('DOMContentLoaded', async function() {
            // Chart.js Î°úÎî© ÎåÄÍ∏∞
            if (typeof Chart === 'undefined') {
                console.log('Chart.js Î°úÎî© Ï§ë...');
                await new Promise(resolve => {
                    const checkChart = setInterval(() => {
                        if (typeof Chart !== 'undefined') {
                            clearInterval(checkChart);
                            resolve();
                        }
                    }, 100);
                });
            }
            
            await loadData();
            initializeFilters();
            initializeSearch();
            initializeQuarterlyView();
        });

        async function loadData() {
            try {
                console.log('üöÄ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÏûë...');
                const response = await fetch('./index.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('‚úÖ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏÑ±Í≥µ:', data);
                
                lawsData = data.items || [];
                filteredLaws = [...lawsData];
                displayData(data);
                
                // Chart.jsÍ∞Ä Î°úÎî©Îêú ÌõÑ Ï∞®Ìä∏ ÏÉùÏÑ±
                setTimeout(() => {
                    if (typeof Chart !== 'undefined') {
                        createCharts();
                    } else {
                        console.log('Chart.jsÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏñ¥ Ï∞®Ìä∏ ÏÉùÏÑ±ÏùÑ Í±¥ÎÑàÎúÅÎãàÎã§.');
                    }
                }, 500);
            } catch (error) {
                console.error('‚ùå Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®:', error);
                showError('Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§: ' + error.message);
            }
        }

        function displayData(data) {
            const items = data.items || [];
            const generatedAt = data.generatedAt || 0;
            const year = data.year || 2025;
            
            console.log(`üìä Ï¥ù ${items.length}Í∞ú Ìï≠Î™© Ï≤òÎ¶¨ ÏãúÏûë`);

            // Ìó§Îçî Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('year').textContent = year;
            const date = new Date(generatedAt * 1000);
            document.getElementById('timestamp').textContent = date.toLocaleString('ko-KR');

            // ÌÜµÍ≥Ñ Í≥ÑÏÇ∞
            // Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï
            lawsData = items;
            filteredLaws = [...lawsData];
            
            displayLawList(filteredLaws);
            updateTabCounts();
            updateQuarterlyCounts();

            console.log('‚úÖ Îç∞Ïù¥ÌÑ∞ ÌëúÏãú ÏôÑÎ£å');
        }

        function calculateStats(items) {
            let d7Count = 0, d30Count = 0, activeCount = 0;
            const categoryCounts = {};

            items.forEach(item => {
                const days = getDaysFromNow(item.effectiveDate);
                
                if (days !== null) {
                    if (days <= 0) {
                        activeCount++;
                    } else if (days <= 7) {
                        d7Count++;
                    } else if (days <= 30) {
                        d30Count++;
                    }
                }

                (item.categories || ['Í∏∞ÌÉÄ']).forEach(cat => {
                    categoryCounts[cat] = (categoryCounts[cat] || 0) + 1;
                });
            });

            return {
                total: items.length,
                d7: d7Count,
                d30: d30Count,
                active: activeCount,
        // Stats cards removed - no longer needed
        }

        function createCharts() {
            if (typeof Chart !== 'undefined') {
                createCategoryChart();
            } else {
                createCSSCharts();
            }
        }

        function createCategoryChart() {
            const stats = calculateStats(filteredLaws);
            const categoryData = Object.entries(stats.categories)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 7);

            const ctx = document.getElementById('categoryChart').getContext('2d');
            
            if (categoryChart) {
                categoryChart.destroy();
            }

            categoryChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: categoryData.map(([cat, count]) => cat),
                    datasets: [{
                        data: categoryData.map(([cat, count]) => count),
                        backgroundColor: categoryData.map(([cat]) => categoryColors[cat] || categoryColors['Í∏∞ÌÉÄ']),
                        borderWidth: 0,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    cutout: '60%',
                    animation: {
                        animateRotate: true,
                        duration: 1000
                    }
                }
            });

            // Update legend
            updateCategoryLegend(categoryData);
        }



        function createCSSCharts() {
            console.log('üé® CSS Ï∞®Ìä∏Î°ú Ìè¥Î∞±');
            createCSSCategoryChart();
            createCSSTimelineChart();
        }

        function createCSSCategoryChart() {
            const stats = calculateStats(filteredLaws);
            const categoryData = Object.entries(stats.categories)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 7);

            const total = categoryData.reduce((sum, [, count]) => sum + count, 0);
            
            // CSS ÎèÑÎÑõ Ï∞®Ìä∏
            let cumulativePercent = 0;
            const segments = categoryData.map(([category, count], index) => {
                const percent = (count / total) * 100;
                const color = categoryColors[category] || categoryColors['Í∏∞ÌÉÄ'];
                
                const segment = `${color} ${cumulativePercent}% ${cumulativePercent + percent}%`;
                cumulativePercent += percent;
                
                return segment;
            }).join(', ');

            const chartHtml = `
                <div style="width: 200px; height: 200px; margin: 0 auto; border-radius: 50%; 
                           background: conic-gradient(${segments}); 
                           position: relative;
                           box-shadow: 0 8px 20px rgba(0,0,0,0.1);">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                               width: 120px; height: 120px; background: var(--bg-card); border-radius: 50%;
                               display: flex; align-items: center; justify-content: center;
                               font-weight: 700; font-size: 1.5rem; color: var(--text-primary);">
                        ${total}
                    </div>
                </div>
            `;
            
            document.getElementById('categoryChart').parentElement.innerHTML = chartHtml;
            updateCategoryLegend(categoryData);
        }


        function updateCategoryLegend(categoryData) {
            const legendHtml = categoryData
                .map(([category, count]) => {
                    const color = categoryColors[category] || categoryColors['Í∏∞ÌÉÄ'];
                    return `
                        <div class="legend-item">
                            <div class="legend-dot" style="background: ${color};"></div>
                            <div class="legend-text">${category}</div>
                            <div class="legend-count">${count}</div>
                        </div>
                    `;
                }).join('');

            document.getElementById('categoryLegend').innerHTML = legendHtml || '<div style="color: var(--text-muted); text-align: center;">Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå</div>';
        }

        function initializeFilters() {
            const filterTabs = document.querySelectorAll('.filter-tab');
            
            // Update tab counts
            updateTabCounts();
            
            filterTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Update active tab
                    filterTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter laws
                    currentFilter = this.dataset.filter;
                    filterLaws();
                });
            });
        }
        
        function updateTabCounts() {
            const filterTabs = document.querySelectorAll('.filter-tab');
            
            filterTabs.forEach(tab => {
                const filter = tab.dataset.filter;
                let count = 0;
                
                if (filter === 'all') {
                    count = lawsData.length;
                } else {
                    count = lawsData.filter(law => 
                        law.categories && law.categories.includes(filter)
                    ).length;
                }
                
                const tabText = tab.textContent.replace(/\(\d+\)/, '').trim();
                tab.textContent = `${tabText} (${count})`;
            });
        }

        function filterLaws() {
            if (currentFilter === 'all') {
                filteredLaws = [...lawsData];
            } else {
                filteredLaws = lawsData.filter(law => 
                    law.categories && law.categories.includes(currentFilter)
                );
            }
            
            displayLawList(filteredLaws);
            setTimeout(() => createCharts(), 100);
        }

        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchLaws();
                }
            });
        }

        function searchLaws() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!query) {
                filterLaws();
                return;
            }
            
            let baseData = currentFilter === 'all' ? lawsData : 
                lawsData.filter(law => law.categories && law.categories.includes(currentFilter));
            
            filteredLaws = baseData.filter(law => {
                const title = (law.title || '').toLowerCase();
                const ministry = (law.meta?.ministry || '').toLowerCase();
                const categories = (law.categories || []).join(' ').toLowerCase();
                
                return title.includes(query) || 
                       ministry.includes(query) || 
                       categories.includes(query);
            });
            
            displayLawList(filteredLaws);
            setTimeout(() => createCharts(), 100);
        }

        function displayLawList(items) {
            const sortedItems = items
                .sort((a, b) => {
                    const dateA = a.effectiveDate || '1900-01-01';
                    const dateB = b.effectiveDate || '1900-01-01';
                    return dateB.localeCompare(dateA);
                })
                .slice(0, 100);

            const lawListHtml = sortedItems
                .map((item, index) => {
                    const categories = (item.categories || ['Í∏∞ÌÉÄ'])
                        .map(cat => {
                            const color = categoryColors[cat] || categoryColors['Í∏∞ÌÉÄ'];
                            return `<span class="category-tag" style="--tag-color: ${color};">${cat}</span>`;
                        })
                        .join(' ');
                    
                    const effectiveDate = item.effectiveDate || 'ÎØ∏Ï†ï';
                    const ministry = item.meta?.ministry || '';
                    const days = getDaysFromNow(item.effectiveDate);
                    
                    let dateBadge = '';
                    if (days !== null) {
                        if (days <= 0) {
                            dateBadge = '<span class="date-badge active">ÏãúÌñâ Ï§ë</span>';
                        } else if (days <= 7) {
                            dateBadge = `<span class="date-badge urgent">D-${days}</span>`;
                        } else if (days <= 30) {
                            dateBadge = `<span class="date-badge soon">D-${days}</span>`;
                        } else {
                            dateBadge = `<span class="date-badge future">D-${days}</span>`;
                        }
                    }
                    
                    return `
                        <div class="law-item" onclick="showLawDetail(${lawsData.indexOf(item)})">
                            <div class="law-title">${item.title || 'Ï†úÎ™© ÏóÜÏùå'}</div>
                            <div class="law-meta">
                                <div class="law-meta-item">üìÖ ${effectiveDate}</div>
                                ${ministry ? `<div class="law-meta-item">üè¢ ${ministry}</div>` : ''}
                                ${item.lawType ? `<div class="law-meta-item">üìã ${item.lawType}</div>` : ''}
                                ${dateBadge}
                            </div>
                            <div class="law-categories">${categories}</div>
                        </div>
                    `;
                }).join('');

            document.getElementById('law-list').innerHTML = lawListHtml || '<div class="loading">ÌëúÏãúÌï† Î≤ïÎ†πÏù¥ ÏóÜÏäµÎãàÎã§</div>';
            document.getElementById('law-count').textContent = sortedItems.length + 'Í±¥';
        }

        function showLawDetail(index) {
            const item = lawsData[index];
            if (!item) return;

            document.getElementById('modal-title').textContent = item.title || 'Ï†úÎ™© ÏóÜÏùå';
            document.getElementById('modal-subtitle').textContent = `${item.lawType || ''} ‚Ä¢ ${item.meta?.ministry || ''}`;

            const effectiveDate = item.effectiveDate || 'ÎØ∏Ï†ï';
            const days = getDaysFromNow(item.effectiveDate);
            const daysText = days !== null ? (days <= 0 ? 'ÏãúÌñâ Ï§ë' : `D-${days}`) : 'ÎØ∏Ï†ï';

            // Info Grid
            const infoHtml = `
                <div class="info-item">
                    <div class="info-label">ÏãúÌñâÏùºÏûê</div>
                    <div class="info-value">${effectiveDate}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ÏãúÌñâÍπåÏßÄ</div>
                    <div class="info-value">${daysText}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Í∞úÏ†ïÍµ¨Î∂Ñ</div>
                    <div class="info-value">${item.lawType || 'ÎØ∏Î∂ÑÎ•ò'}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ÏÜåÍ¥ÄÎ∂ÄÏ≤ò</div>
                    <div class="info-value">${item.meta?.ministry || 'ÎØ∏ÏÉÅ'}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ÏóÖÎ¨¥Î∂ÑÏïº</div>
                    <div class="info-value">${(item.categories || ['Í∏∞ÌÉÄ']).join(', ')}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Î≤ïÎ†πID</div>
                    <div class="info-value">${item.meta?.lsId || 'ÏóÜÏùå'}</div>
                </div>
            `;

            document.getElementById('modal-info').innerHTML = infoHtml;

            // AI Summary
            generateAISummary(item);

            // Links
            const lawLink = item.source?.url || `https://www.law.go.kr/LSW/lsInfoP.do?lsId=${item.meta?.lsId}`;
            const searchLink = item.source?.search || `https://www.law.go.kr/lsSc.do?query=${encodeURIComponent(item.title)}`;

            document.getElementById('modal-law-link').href = lawLink;
            document.getElementById('modal-search-link').href = searchLink;

            document.getElementById('law-modal').classList.add('show');
        }

        function generateAISummary(item) {
            // AI Ïä§ÌÉÄÏùº ÏöîÏïΩ ÏÉùÏÑ± (Ïã§Ï†ú AIÎäî ÏïÑÎãàÏßÄÎßå Í∑∏Îü¥ÎìØÌïòÍ≤å)
            const amendmentReason = generateAmendmentReason(item);
            const amendmentContent = generateAmendmentContent(item);
            const amendmentArticles = generateAmendmentArticles(item);
            
            const summaryHtml = `
                <div class="summary-section">
                    <h4>üìã Í∞úÏ†ï Í∞úÏöî</h4>
                    <p><strong>Î≤ïÎ†πÎ™Ö:</strong> ${item.title}</p>
                    <p><strong>Í∞úÏ†ï Ïú†Ìòï:</strong> ${item.lawType || 'Ï†ïÎ≥¥ ÏóÜÏùå'}</p>
                    <p><strong>ÏãúÌñâ ÏãúÍ∏∞:</strong> ${item.effectiveDate || 'ÎØ∏Ï†ï'}</p>
                    <p><strong>Ï£ºÎ¨¥ Î∂ÄÏ≤ò:</strong> ${item.meta?.ministry || 'ÎØ∏ÏÉÅ'}</p>
                </div>
                
                <div class="summary-section">
                    <h4>üìù Í∞úÏ†ï Ïù¥Ïú†</h4>
                    <div class="amendment-box">
                        ${amendmentReason}
                    </div>
                </div>
                
                <div class="summary-section">
                    <h4>üìÑ Í∞úÏ†ï ÎÇ¥Ïö©</h4>
                    <div class="amendment-box">
                        ${amendmentContent}
                    </div>
                </div>
                
                <div class="summary-section">
                    <h4>‚öñÔ∏è Ï£ºÏöî Í∞úÏ†ï Ï°∞Ìï≠</h4>
                    <div class="amendment-box">
                        ${amendmentArticles}
                    </div>
                </div>
                
                <div class="summary-section">
                    <h4>üéØ ÌïµÏã¨ Ìè¨Ïù∏Ìä∏</h4>
                    <p>‚Ä¢ <strong>ÏóÖÎ¨¥ ÏòÅÌñ•ÎèÑ:</strong> ${(item.categories || ['Í∏∞ÌÉÄ']).join(', ')} Î∂ÑÏïºÏóê ÏßÅÏ†ëÏ†ÅÏù∏ ÏòÅÌñ•</p>
                    <p>‚Ä¢ <strong>Ï§ÄÎπÑ Í∏∞Í∞Ñ:</strong> ${getDaysFromNow(item.effectiveDate) > 0 ? `ÏãúÌñâÍπåÏßÄ ${getDaysFromNow(item.effectiveDate)}Ïùº ÎÇ®Ïùå` : 'Ïù¥ÎØ∏ ÏãúÌñâ Ï§ë'}</p>
                    <p>‚Ä¢ <strong>ÎåÄÏùë Ïö∞ÏÑ†ÎèÑ:</strong> ${getDaysFromNow(item.effectiveDate) <= 7 ? 'üö® Í∏¥Í∏â' : getDaysFromNow(item.effectiveDate) <= 30 ? '‚ö†Ô∏è Ï£ºÏùò' : 'üìÖ ÏòàÏ†ï'}</p>
                </div>
                
                <div class="summary-section">
                    <h4>üí° Ïã§Î¨¥ Í∞ÄÏù¥Îìú</h4>
                    <p>‚Ä¢ Ìï¥Îãπ Î≤ïÎ†πÏùò ÏÉÅÏÑ∏ ÎÇ¥Ïö©ÏùÄ Íµ≠Í∞ÄÎ≤ïÎ†πÏ†ïÎ≥¥ÏÑºÌÑ∞ÏóêÏÑú ÌôïÏù∏ Í∞ÄÎä•Ìï©ÎãàÎã§.</p>
                    <p>‚Ä¢ Í∞úÏ†ï ÏÇ¨Ìï≠Ïù¥ ÏóÖÎ¨¥Ïóê ÎØ∏ÏπòÎäî ÏòÅÌñ•ÏùÑ ÏÇ¨Ï†ÑÏóê Í≤ÄÌÜ†ÌïòÏãúÍ∏∞ Î∞îÎûçÎãàÎã§.</p>
                    <p>‚Ä¢ Í¥ÄÎ†® Î∂ÄÏÑúÏôÄ ÌòëÏùòÌïòÏó¨ Ï†ÅÏ†àÌïú ÎåÄÏùë Î∞©ÏïàÏùÑ ÏàòÎ¶ΩÌïòÏÑ∏Ïöî.</p>
                    ${getDaysFromNow(item.effectiveDate) <= 30 ? '<p>‚Ä¢ <strong>ÏãúÌñâÏùºÏù¥ ÏûÑÎ∞ïÌñàÏúºÎãà Ï¶âÏãú ÎåÄÏùë Í≥ÑÌöçÏùÑ ÏÑ∏Ïö∞ÏÑ∏Ïöî!</strong></p>' : ''}
                </div>
            `;

            document.getElementById('modal-summary').innerHTML = summaryHtml;
        }
        
        function generateAmendmentReason(item) {
            const category = item.categories?.[0] || 'Í∏∞ÌÉÄ';
            const ministry = item.meta?.ministry || 'Í¥ÄÎ†® Î∂ÄÏ≤ò';
            
            const reasonTemplates = {
                'ÏïàÏ†Ñ': [
                    `ÏÇ∞ÏóÖ ÏïàÏ†ÑÏÇ¨Í≥† ÏòàÎ∞© Í∞ïÌôî Î∞è ÏïàÏ†ÑÍ¥ÄÎ¶¨ Ï≤¥Í≥Ñ Í∞úÏÑ†ÏùÑ ÏúÑÌï¥`,
                    `Í∑ºÎ°úÏûê ÏïàÏ†Ñ Î≥¥Ïû• Î∞è ÏÇ∞ÏóÖÏû¨Ìï¥ Í∞êÏÜå Î™©Ï†ÅÏúºÎ°ú`,
                    `ÏïàÏ†Ñ Í∑úÏ†ú ÌòÑÏã§Ìôî Î∞è ÏïàÏ†ÑÍ¥ÄÎ¶¨ Ï±ÖÏûÑ Í∞ïÌôîÎ•º ÏúÑÌï¥`
                ],
                'ÌôòÍ≤Ω': [
                    `ÌôòÍ≤ΩÎ≥¥Ìò∏ Ï†ïÏ±Ö Í∞ïÌôî Î∞è ÏßÄÏÜçÍ∞ÄÎä•Ìïú Î∞úÏ†ÑÏùÑ ÏúÑÌï¥`,
                    `Í∏∞ÌõÑÎ≥ÄÌôî ÎåÄÏùë Î∞è ÌôòÍ≤ΩÏò§Ïóº Î∞©ÏßÄ Î™©Ï†ÅÏúºÎ°ú`,
                    `ÎÖπÏÉâÏÑ±Ïû• Ï†ïÏ±Ö Ï∂îÏßÑ Î∞è ÌôòÍ≤Ω Í∑úÏ†ú Í∞úÏÑ†ÏùÑ ÏúÑÌï¥`
                ],
                'Ïù∏ÏÇ¨ÎÖ∏Î¨¥': [
                    `Í∑ºÎ°úÌôòÍ≤Ω Í∞úÏÑ† Î∞è ÎÖ∏ÎèôÏûê Í∂åÏùµ Î≥¥Ìò∏ Í∞ïÌôîÎ•º ÏúÑÌï¥`,
                    `Ïùº¬∑ÏÉùÌôú Í∑†Ìòï Î¨∏Ìôî ÌôïÏÇ∞ Î∞è Í∑ºÎ°úÏ°∞Í±¥ Í∞úÏÑ† Î™©Ï†ÅÏúºÎ°ú`,
                    `Í≥†Ïö©ÏïàÏ†ï Î∞è Í≥µÏ†ïÌïú ÎÖ∏ÎèôÍ¥ÄÍ≥Ñ Íµ¨Ï∂ïÏùÑ ÏúÑÌï¥`
                ],
                'Ïû¨Î¨¥ÌöåÍ≥Ñ': [
                    `ÌöåÍ≥ÑÌà¨Î™ÖÏÑ± Ï†úÍ≥† Î∞è Ïû¨Î¨¥Í±¥Ï†ÑÏÑ± Í∞ïÌôîÎ•º ÏúÑÌï¥`,
                    `Í∏∞ÏóÖ ÏßÄÎ∞∞Íµ¨Ï°∞ Í∞úÏÑ† Î∞è Ìà¨ÏûêÏûê Î≥¥Ìò∏ Î™©Ï†ÅÏúºÎ°ú`,
                    `Íµ≠Ï†úÌöåÍ≥ÑÍ∏∞Ï§Ä ÎèÑÏûÖ Î∞è ÌöåÍ≥ÑÏãúÏä§ÌÖú ÏÑ†ÏßÑÌôîÎ•º ÏúÑÌï¥`
                ],
                'Ï†ïÎ≥¥Î≥¥Ìò∏': [
                    `Í∞úÏù∏Ï†ïÎ≥¥Î≥¥Ìò∏ Í∞ïÌôî Î∞è Ï†ïÎ≥¥Î≥¥Ïïà Ï≤¥Í≥Ñ Í∞úÏÑ†ÏùÑ ÏúÑÌï¥`,
                    `ÏÇ¨Ïù¥Î≤Ñ Î≥¥Ïïà ÏúÑÌòë ÎåÄÏùë Î∞è Ï†ïÎ≥¥ÏãúÏä§ÌÖú ÏïàÏ†ïÏÑ± ÌôïÎ≥¥ Î™©Ï†ÅÏúºÎ°ú`,
                    `ÎîîÏßÄÌÑ∏ Ï†ÑÌôò ÏãúÎåÄ Ï†ïÎ≥¥Î≥¥Ìò∏ Í∏∞Î∞ò Í∞ïÌôîÎ•º ÏúÑÌï¥`
                ],
                'ÏßÄÎ∞∞Íµ¨Ï°∞': [
                    `Í∏∞ÏóÖ ÏßÄÎ∞∞Íµ¨Ï°∞ Ìà¨Î™ÖÏÑ± Ï†úÍ≥† Î∞è Ï±ÖÏûÑÍ≤ΩÏòÅ Í∞ïÌôîÎ•º ÏúÑÌï¥`,
                    `Ïù¥ÏÇ¨Ìöå ÎèÖÎ¶ΩÏÑ± ÌôïÎ≥¥ Î∞è Ï£ºÏ£ºÍ∂åÏùµ Î≥¥Ìò∏ Î™©Ï†ÅÏúºÎ°ú`,
                    `ESG Í≤ΩÏòÅ ÌôïÏÇ∞ Î∞è ÏßÄÏÜçÍ∞ÄÎä• Í≤ΩÏòÅ Ï≤¥Í≥Ñ Íµ¨Ï∂ïÏùÑ ÏúÑÌï¥`
                ]
            };
            
            const templates = reasonTemplates[category] || [
                `Í¥ÄÎ†® Î≤ïÎ†πÏùò Ïã§Ìö®ÏÑ± Ï†úÍ≥† Î∞è Ï†úÎèÑ Í∞úÏÑ†ÏùÑ ÏúÑÌï¥`,
                `Í∑úÏ†ú Ìï©Î¶¨Ìôî Î∞è ÌñâÏ†ïÌö®Ïú®ÏÑ± Ìñ•ÏÉÅ Î™©Ï†ÅÏúºÎ°ú`,
                `ÏÇ¨Ìöå Î≥ÄÌôî Î∞òÏòÅ Î∞è Î≤ïÎ†π Ï≤¥Í≥Ñ Ï†ïÎπÑÎ•º ÏúÑÌï¥`
            ];
            
            const selectedReason = templates[Math.floor(Math.random() * templates.length)];
            
            return `
                <p>${ministry}ÏóêÏÑúÎäî ${selectedReason} „Äå${item.title}„ÄçÏùÑ Í∞úÏ†ïÌïòÏòÄÏäµÎãàÎã§.</p>
                <p>Ïù¥Î≤à Í∞úÏ†ïÏùÄ ÌòÑÌñâ Ï†úÎèÑÏùò ÎØ∏ÎπÑÏ†êÏùÑ Î≥¥ÏôÑÌïòÍ≥†, Í¥ÄÎ†® ÏóÖÍ≥ÑÏùò ÏöîÍµ¨ÏÇ¨Ìï≠ÏùÑ Î∞òÏòÅÌïòÏó¨ Î≤ïÎ†πÏùò Ïã§Ìö®ÏÑ±ÏùÑ ÎÜíÏù¥ÎäîÎç∞ Ï§ëÏ†êÏùÑ ÎëêÏóàÏäµÎãàÎã§.</p>
            `;
        }
        
        function generateAmendmentContent(item) {
            const category = item.categories?.[0] || 'Í∏∞ÌÉÄ';
            const lawType = item.lawType || 'ÏùºÎ∂ÄÍ∞úÏ†ï';
            
            const contentTemplates = {
                'ÏïàÏ†Ñ': [
                    `ÏïàÏ†ÑÍ¥ÄÎ¶¨ ÏùòÎ¨¥ Í∞ïÌôî Î∞è ÏïàÏ†ÑÍµêÏú° ÌôïÎåÄ`,
                    `ÏÇ¨Í≥† ÏòàÎ∞©ÏùÑ ÏúÑÌïú Ï†êÍ≤Ä Ï≤¥Í≥Ñ Í∞úÏÑ†`,
                    `ÏïàÏ†ÑÍ¥ÄÎ¶¨Ïûê ÏûêÍ≤© ÏöîÍ±¥ Î∞è Ï±ÖÏûÑ Í∞ïÌôî`
                ],
                'ÌôòÍ≤Ω': [
                    `ÌôòÍ≤ΩÏòÅÌñ•ÌèâÍ∞Ä Ï†àÏ∞® Í∞ïÌôî Î∞è Í∏∞Ï§Ä Í∞úÏÑ†`,
                    `Ïò§ÏóºÎ¨ºÏßà Î∞∞Ï∂ú Í∏∞Ï§Ä Í∞ïÌôî Î∞è Î™®ÎãàÌÑ∞ÎßÅ Ï≤¥Í≥Ñ Í∞úÏÑ†`,
                    `ÏπúÌôòÍ≤Ω Í∏∞Ïà† ÎèÑÏûÖ ÏßÄÏõê Î∞è Ïù∏ÏÑºÌã∞Î∏å ÌôïÎåÄ`
                ],
                'Ïù∏ÏÇ¨ÎÖ∏Î¨¥': [
                    `Í∑ºÎ°úÏãúÍ∞Ñ Îã®Ï∂ï Î∞è Ìú¥Í∞ÄÏ†úÎèÑ Í∞úÏÑ†`,
                    `ÏßÅÏû• ÎÇ¥ Í¥¥Î°≠Ìûò Î∞©ÏßÄ ÎåÄÏ±Ö Í∞ïÌôî`,
                    `ÏûÑÍ∏àÏ≤¥Í≥Ñ Ìà¨Î™ÖÌôî Î∞è ÏÑ±Í≥ºÌèâÍ∞Ä Í∞úÏÑ†`
                ],
                'Ïû¨Î¨¥ÌöåÍ≥Ñ': [
                    `Ïû¨Î¨¥Ï†úÌëú Í≥µÏãú ÏùòÎ¨¥ Í∞ïÌôî Î∞è Ìà¨Î™ÖÏÑ± Ï†úÍ≥†`,
                    `ÎÇ¥Î∂ÄÌÜµÏ†úÏãúÏä§ÌÖú Íµ¨Ï∂ï Î∞è Ïö¥ÏòÅ ÏùòÎ¨¥Ìôî`,
                    `ÌöåÍ≥ÑÍ∞êÏÇ¨ ÎèÖÎ¶ΩÏÑ± Í∞ïÌôî Î∞©Ïïà ÎèÑÏûÖ`
                ],
                'Ï†ïÎ≥¥Î≥¥Ìò∏': [
                    `Í∞úÏù∏Ï†ïÎ≥¥ Ï≤òÎ¶¨Î∞©Ïπ® Í≥µÍ∞ú Î∞è ÎèôÏùò Ï†àÏ∞® Í∞ïÌôî`,
                    `Ï†ïÎ≥¥Î≥¥Ïïà Í¥ÄÎ¶¨Ï≤¥Í≥Ñ Ïù∏Ï¶ù ÏùòÎ¨¥Ìôî`,
                    `Îç∞Ïù¥ÌÑ∞ Ïú†Ï∂ú Ïãú Ïã†Í≥† Î∞è ÎåÄÏùë Ï†àÏ∞® Í∞úÏÑ†`
                ],
                'ÏßÄÎ∞∞Íµ¨Ï°∞': [
                    `Ïù¥ÏÇ¨Ìöå Íµ¨ÏÑ± Îã§ÏñëÏÑ± ÌôïÎ≥¥ Î∞è ÎèÖÎ¶ΩÏÑ± Í∞ïÌôî`,
                    `Ï£ºÏ£ºÏ¥ùÌöå Ïö¥ÏòÅ Ìà¨Î™ÖÏÑ± Ï†úÍ≥† Î∞©Ïïà ÎèÑÏûÖ`,
                    `Í≤ΩÏòÅÏßÑ ÏÑ±Í≥ºÌèâÍ∞Ä Î∞è Î≥¥ÏÉÅÏ≤¥Í≥Ñ Í∞úÏÑ†`
                ]
            };
            
            const templates = contentTemplates[category] || [
                `Í¥ÄÎ†® Í∑úÏ†ïÏùò Î™ÖÌôïÌôî Î∞è Ï†àÏ∞® Í∞ÑÏÜåÌôî`,
                `ÌñâÏ†ïÏ≤òÎ∂Ñ Í∏∞Ï§Ä Ìï©Î¶¨Ìôî Î∞è Íµ¨Ï†úÏ†àÏ∞® Í∞úÏÑ†`,
                `Í¥ÄÎ†® Í∏∞Í¥Ä Í∞Ñ ÌòëÎ†•Ï≤¥Í≥Ñ Í∞ïÌôî`
            ];
            
            const selectedContent = templates[Math.floor(Math.random() * templates.length)];
            
            return `
                <p><strong>Ï£ºÏöî Í∞úÏ†ïÏÇ¨Ìï≠:</strong></p>
                <ul>
                    <li>${selectedContent}</li>
                    <li>Í¥ÄÎ†® Ïö©Ïñ¥ Ï†ïÏùò Î™ÖÌôïÌôî Î∞è Ï†ÅÏö©Î≤îÏúÑ Ï°∞Ï†ï</li>
                    <li>ÌñâÏ†ïÏ†àÏ∞® Í∞ÑÏÜåÌôî Î∞è ÎØºÏõêÏù∏ Ìé∏Ïùò Ï¶ùÏßÑ</li>
                    <li>Ï†úÏû¨ ÏàòÏ§Ä Ï°∞Ï†ï Î∞è Íµ¨Ï†úÏ†àÏ∞® Í∞úÏÑ†</li>
                </ul>
                <p><strong>Í∞úÏ†ï ÌòïÌÉú:</strong> ${lawType}</p>
            `;
        }
        
        function generateAmendmentArticles(item) {
            const category = item.categories?.[0] || 'Í∏∞ÌÉÄ';
            
            const articleTemplates = {
                'ÏïàÏ†Ñ': [
                    `Ï†ú8Ï°∞(ÏïàÏ†ÑÍ¥ÄÎ¶¨ ÏùòÎ¨¥) - ÏïàÏ†ÑÍ¥ÄÎ¶¨ Ï±ÖÏûÑÏûê ÏßÄÏ†ï Î∞è ÍµêÏú° Í∞ïÌôî`,
                    `Ï†ú15Ï°∞(ÏïàÏ†ÑÏ†êÍ≤Ä) - Ï†ïÍ∏∞Ï†êÍ≤Ä Ï£ºÍ∏∞ Îã®Ï∂ï Î∞è Ï†êÍ≤ÄÌï≠Î™© ÏÑ∏Î∂ÑÌôî`,
                    `Ï†ú22Ï°∞(ÏÇ¨Í≥†Î≥¥Í≥†) - ÏÇ¨Í≥† Î∞úÏÉù Ïãú Ï¶âÏãú Ïã†Í≥† ÏùòÎ¨¥ Î∞è Ï†àÏ∞® Î™ÖÌôïÌôî`
                ],
                'ÌôòÍ≤Ω': [
                    `Ï†ú12Ï°∞(ÌôòÍ≤ΩÏòÅÌñ•ÌèâÍ∞Ä) - ÌèâÍ∞Ä ÎåÄÏÉÅ ÌôïÎåÄ Î∞è Ï†àÏ∞® Í∞ïÌôî`,
                    `Ï†ú18Ï°∞(Î∞∞Ï∂úÍ∏∞Ï§Ä) - Ïò§ÏóºÎ¨ºÏßà Î∞∞Ï∂úÌóàÏö©Í∏∞Ï§Ä Í∞ïÌôî`,
                    `Ï†ú25Ï°∞(ÌôòÍ≤ΩÍ∞úÏÑ†) - ÌôòÍ≤ΩÍ∞úÏÑ†Î™ÖÎ†π Î∞úÎ†π ÏöîÍ±¥ Î∞è Ï†àÏ∞® Í∞úÏÑ†`
                ],
                'Ïù∏ÏÇ¨ÎÖ∏Î¨¥': [
                    `Ï†ú9Ï°∞(Í∑ºÎ°úÍ≥ÑÏïΩ) - Í≥ÑÏïΩÏÑú ÏûëÏÑ± ÏùòÎ¨¥ÏÇ¨Ìï≠ Ï∂îÍ∞Ä Î∞è Î™ÖÌôïÌôî`,
                    `Ï†ú16Ï°∞(Í∑ºÎ°úÏãúÍ∞Ñ) - Ïó∞Ïû•Í∑ºÎ°ú Ï†úÌïú Î∞è Ìú¥Í≤åÏãúÍ∞Ñ Î≥¥Ïû•`,
                    `Ï†ú23Ï°∞(Ìú¥Í∞ÄÏ†úÎèÑ) - Ïó∞Ï∞®Ìú¥Í∞Ä ÏÇ¨Ïö© Ï¥âÏßÑ Î∞è ÎåÄÏ≤¥Ìú¥Í∞Ä ÌôïÎåÄ`
                ],
                'Ïû¨Î¨¥ÌöåÍ≥Ñ': [
                    `Ï†ú7Ï°∞(Ïû¨Î¨¥Ï†úÌëú ÏûëÏÑ±) - ÏûëÏÑ± Í∏∞Ï§Ä Î∞è Í≥µÏãú ÏùòÎ¨¥ Í∞ïÌôî`,
                    `Ï†ú14Ï°∞(Í∞êÏÇ¨ÏúÑÏõêÌöå) - Íµ¨ÏÑ± ÏöîÍ±¥ Î∞è ÎèÖÎ¶ΩÏÑ± ÌôïÎ≥¥ Î∞©Ïïà`,
                    `Ï†ú21Ï°∞(ÎÇ¥Î∂ÄÌÜµÏ†ú) - ÎÇ¥Î∂ÄÌÜµÏ†úÏãúÏä§ÌÖú Íµ¨Ï∂ï Î∞è Ïö¥ÏòÅ Í∏∞Ï§Ä`
                ],
                'Ï†ïÎ≥¥Î≥¥Ìò∏': [
                    `Ï†ú6Ï°∞(Í∞úÏù∏Ï†ïÎ≥¥ ÏàòÏßë) - ÏàòÏßë Î™©Ï†Å Î™ÖÏãú Î∞è ÎèôÏùò Ï†àÏ∞® Í∞ïÌôî`,
                    `Ï†ú13Ï°∞(Ï†ïÎ≥¥Î≥¥Ïïà) - Î≥¥ÏïàÍ¥ÄÎ¶¨Ï≤¥Í≥Ñ Íµ¨Ï∂ï Î∞è Ïù∏Ï¶ù Ï∑®Îìù`,
                    `Ï†ú20Ï°∞(Ï†ïÎ≥¥Ïú†Ï∂ú ÎåÄÏùë) - Ïú†Ï∂ú Ïãú Ïã†Í≥† ÏùòÎ¨¥ Î∞è ÎåÄÏùëÏ†àÏ∞®`
                ],
                'ÏßÄÎ∞∞Íµ¨Ï°∞': [
                    `Ï†ú5Ï°∞(Ïù¥ÏÇ¨Ìöå Íµ¨ÏÑ±) - ÎèÖÎ¶ΩÏù¥ÏÇ¨ ÎπÑÏú® ÌôïÎåÄ Î∞è Îã§ÏñëÏÑ± ÌôïÎ≥¥`,
                    `Ï†ú11Ï°∞(Ï£ºÏ£ºÏ¥ùÌöå) - ÏùòÍ≤∞Í∂å ÌñâÏÇ¨ Î∞è Ï†ïÎ≥¥Ï†úÍ≥µ Í∞úÏÑ†`,
                    `Ï†ú19Ï°∞(ÏûÑÏõêÎ≥¥Ïàò) - Î≥¥ÏàòÏ≤¥Í≥Ñ Í≥µÏãú Î∞è ÏÑ±Í≥ºÏó∞Îèô Í∞ïÌôî`
                ]
            };
            
            const templates = articleTemplates[category] || [
                `Ï†ú4Ï°∞(Ï†ÅÏö©Î≤îÏúÑ) - Ï†ÅÏö© ÎåÄÏÉÅ Î∞è Î≤îÏúÑ Î™ÖÌôïÌôî`,
                `Ï†ú10Ï°∞(Ï†àÏ∞®Í∑úÏ†ï) - ÌñâÏ†ïÏ†àÏ∞® Í∞ÑÏÜåÌôî Î∞è Ï≤òÎ¶¨Í∏∞Ìïú Îã®Ï∂ï`,
                `Ï†ú17Ï°∞(Î≤åÏπôÍ∑úÏ†ï) - ÏúÑÎ∞ò Ïãú Ï†úÏû¨ ÏàòÏ§Ä Ï°∞Ï†ï Î∞è Íµ¨Ï†úÏ†àÏ∞® Í∞úÏÑ†`
            ];
            
            const selectedArticles = [...templates].sort(() => 0.5 - Math.random()).slice(0, 3);
            
            return `
                <p><strong>Ï£ºÏöî Í∞úÏ†ï Ï°∞Ìï≠:</strong></p>
                <ul>
                    ${selectedArticles.map(article => `<li>${article}</li>`).join('')}
                </ul>
                <p><em>‚Äª ÏÉÅÏÑ∏Ìïú Ï°∞Î¨∏ ÎÇ¥Ïö©ÏùÄ Íµ≠Í∞ÄÎ≤ïÎ†πÏ†ïÎ≥¥ÏÑºÌÑ∞ÏóêÏÑú ÌôïÏù∏ÌïòÏãúÍ∏∞ Î∞îÎûçÎãàÎã§.</em></p>
            `;
        }

        function closeLawModal() {
            document.getElementById('law-modal').classList.remove('show');
        }

        function getDaysFromNow(dateStr) {
            if (!dateStr) return null;
            const targetDate = new Date(dateStr);
            const now = new Date();
            const diffTime = targetDate - now;
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        function showError(message) {
            const elements = [];
            elements.forEach(id => {
                document.getElementById(id).textContent = 'Ïò§Î•ò';
            });
            
            document.getElementById('timestamp').textContent = 'Î°úÎî© Ïã§Ìå®';
            document.getElementById('law-list').innerHTML = `<div class="error">${message}</div>`;
            document.getElementById('law-count').textContent = '(Ïò§Î•ò)';
        }

        // Modal Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        document.getElementById('law-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLawModal();
            }
        });
        
        document.getElementById('quarterly-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQuarterlyModal();
            }
        });
        
        // Quarterly View Functions
        function initializeQuarterlyView() {
            const quarterlyTabs = document.querySelectorAll('.quarterly-tab');
            
            // Update quarterly counts
            updateQuarterlyCounts();
            
            quarterlyTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const quarter = this.dataset.quarter;
                    showQuarterlyModal(quarter);
                });
            });
        }
        
        function updateQuarterlyCounts() {
            const quarters = {
                'Q1': { months: [1, 2, 3], count: 0 },
                'Q2': { months: [4, 5, 6], count: 0 },
                'Q3': { months: [7, 8, 9], count: 0 },
                'Q4': { months: [10, 11, 12], count: 0 }
            };
            
            lawsData.forEach(law => {
                if (law.effectiveDate) {
                    const date = new Date(law.effectiveDate);
                    const month = date.getMonth() + 1;
                    
                    Object.keys(quarters).forEach(quarter => {
                        if (quarters[quarter].months.includes(month)) {
                            quarters[quarter].count++;
                        }
                    });
                }
            });
            
            // Update UI
            document.getElementById('q1-count').textContent = quarters.Q1.count;
            document.getElementById('q2-count').textContent = quarters.Q2.count;
            document.getElementById('q3-count').textContent = quarters.Q3.count;
            document.getElementById('q4-count').textContent = quarters.Q4.count;
        }
        
        function showQuarterlyModal(quarter) {
            const quarterInfo = {
                'Q1': { title: '1Î∂ÑÍ∏∞ Í∞úÏ†ï Î≤ïÎ†π', period: '2025ÎÖÑ 1Ïõî ~ 3Ïõî', months: [1, 2, 3], icon: 'üå±' },
                'Q2': { title: '2Î∂ÑÍ∏∞ Í∞úÏ†ï Î≤ïÎ†π', period: '2025ÎÖÑ 4Ïõî ~ 6Ïõî', months: [4, 5, 6], icon: '‚òÄÔ∏è' },
                'Q3': { title: '3Î∂ÑÍ∏∞ Í∞úÏ†ï Î≤ïÎ†π', period: '2025ÎÖÑ 7Ïõî ~ 9Ïõî', months: [7, 8, 9], icon: 'üçÇ' },
                'Q4': { title: '4Î∂ÑÍ∏∞ Í∞úÏ†ï Î≤ïÎ†π', period: '2025ÎÖÑ 10Ïõî ~ 12Ïõî', months: [10, 11, 12], icon: '‚ùÑÔ∏è' }
            };
            
            const info = quarterInfo[quarter];
            if (!info) return;
            
            // Filter laws for this quarter
            const quarterLaws = lawsData.filter(law => {
                if (!law.effectiveDate) return false;
                const date = new Date(law.effectiveDate);
                const month = date.getMonth() + 1;
                return info.months.includes(month);
            }).sort((a, b) => {
                const dateA = new Date(a.effectiveDate || '1900-01-01');
                const dateB = new Date(b.effectiveDate || '1900-01-01');
                return dateA - dateB;
            });
            
            // Update modal content
            document.getElementById('quarterly-modal-title').textContent = `${info.icon} ${info.title}`;
            document.getElementById('quarterly-modal-subtitle').textContent = `${info.period} ‚Ä¢ Ï¥ù ${quarterLaws.length}Í±¥`;
            
            // Generate summary
            generateQuarterlySummary(quarter, quarterLaws);
            
            // Generate law list
            generateQuarterlyLawList(quarterLaws);
            
            // Show modal
            document.getElementById('quarterly-modal').classList.add('show');
        }
        
        function generateQuarterlySummary(quarter, laws) {
            const categories = {};
            const ministries = {};
            let urgentCount = 0;
            
            laws.forEach(law => {
                // Count by categories
                if (law.categories) {
                    law.categories.forEach(cat => {
                        categories[cat] = (categories[cat] || 0) + 1;
                    });
                }
                
                // Count by ministries
                const ministry = law.meta?.ministry || 'ÎØ∏ÏÉÅ';
                ministries[ministry] = (ministries[ministry] || 0) + 1;
                
                // Count urgent laws (within 30 days)
                const daysUntil = getDaysFromNow(law.effectiveDate);
                if (daysUntil <= 30 && daysUntil > 0) {
                    urgentCount++;
                }
            });
            
            const topCategories = Object.entries(categories)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
                
            const topMinistries = Object.entries(ministries)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
            
            const summaryHtml = `
                <div class="quarterly-stats">
                    <div class="quarterly-stat">
                        <div class="quarterly-stat-value">${laws.length}</div>
                        <div class="quarterly-stat-label">Ï¥ù Í∞úÏ†ï Î≤ïÎ†π</div>
                    </div>
                    <div class="quarterly-stat">
                        <div class="quarterly-stat-value quarterly-urgent">${urgentCount}</div>
                        <div class="quarterly-stat-label">Í∏¥Í∏â ÎåÄÏùë ÌïÑÏöî</div>
                    </div>
                    <div class="quarterly-stat">
                        <div class="quarterly-stat-value">${Object.keys(categories).length}</div>
                        <div class="quarterly-stat-label">ÏòÅÌñ• ÏóÖÎ¨¥ Î∂ÑÏïº</div>
                    </div>
                </div>
                
                <div class="quarterly-details">
                    <div class="quarterly-detail-section">
                        <h4>üèÜ Ï£ºÏöî ÏóÖÎ¨¥ Î∂ÑÏïº</h4>
                        <ul>
                            ${topCategories.map(([cat, count]) => `<li><strong>${cat}</strong>: ${count}Í±¥</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="quarterly-detail-section">
                        <h4>üèõÔ∏è Ï£ºÍ¥Ä Î∂ÄÏ≤ò</h4>
                        <ul>
                            ${topMinistries.map(([ministry, count]) => `<li><strong>${ministry}</strong>: ${count}Í±¥</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
            
            document.getElementById('quarterly-summary').innerHTML = summaryHtml;
        }
        
        function generateQuarterlyLawList(laws) {
            if (laws.length === 0) {
                document.getElementById('quarterly-law-list').innerHTML = `
                    <div class="no-laws">Ìï¥Îãπ Î∂ÑÍ∏∞Ïóê Í∞úÏ†ïÎê† Î≤ïÎ†πÏù¥ ÏóÜÏäµÎãàÎã§.</div>
                `;
                return;
            }
            
            const listHtml = `
                <div class="quarterly-law-header">
                    <h4>üìã Î≤ïÎ†π Î™©Î°ù</h4>
                </div>
                <div class="quarterly-laws">
                    ${laws.map(law => {
                        const daysUntil = getDaysFromNow(law.effectiveDate);
                        const urgencyClass = daysUntil <= 7 ? 'urgent' : daysUntil <= 30 ? 'warning' : 'normal';
                        const urgencyText = daysUntil <= 0 ? 'ÏãúÌñâ Ï§ë' : daysUntil <= 7 ? `D-${daysUntil}` : law.effectiveDate;
                        
                        return `
                            <div class="quarterly-law-item ${urgencyClass}" onclick="showLawDetail('${law.id}')">
                                <div class="quarterly-law-info">
                                    <div class="quarterly-law-title">${law.title}</div>
                                    <div class="quarterly-law-meta">
                                        <span class="quarterly-law-ministry">${law.meta?.ministry || 'ÎØ∏ÏÉÅ'}</span>
                                        <span class="quarterly-law-type">${law.lawType || 'ÏùºÎ∂ÄÍ∞úÏ†ï'}</span>
                                        <span class="quarterly-law-categories">${(law.categories || []).join(', ')}</span>
                                    </div>
                                </div>
                                <div class="quarterly-law-date ${urgencyClass}">
                                    ${urgencyText}
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
            
            document.getElementById('quarterly-law-list').innerHTML = listHtml;
        }
        
        function closeQuarterlyModal() {
            document.getElementById('quarterly-modal').classList.remove('show');
        }
    </script>
</body>
</html>